---
id: create-a-connection
title: åˆ›å»ºç¤¾äº¤è¿æ¥
slug: /get-started/create-a-connection/
sidebar_label: åˆ›å»ºç¤¾äº¤è¿æ¥
sidebar_position: 3
description: We have to make sure that the user is connecting to the application using a wallet. In our example we will write the logic for the connection to the application using MetaMask, one of the most popular wallets out there.
---

:::tip æç¤º

åœ¨å¼€å§‹æœ¬ç« ä¹‹å‰è¯·å…ˆ [å®‰è£… CyberConnect JS SDK](/get-started/quick-setup/) ã€‚

:::

## è¿æ¥ç”¨æˆ·é’±åŒ…

åœ¨å¸®åŠ©ç”¨æˆ·å…³è”å½¼æ­¤ä¹‹å‰ï¼Œä½ éœ€è¦å…ˆç¡®ä¿ç”¨æˆ·å°†ä»–ä»¬çš„è™šæ‹Ÿè´§å¸é’±åŒ…è¿æ¥ä¸Šäº†ä½ çš„åº”ç”¨ï¼Œæˆ‘ä»¬å°†ä»¥ MetaMask ä¸ºä¾‹ã€‚

1. å®ç°å‡½æ•° `isMetaMaskInstalled` æ¥ç¡®è®¤ç”¨æˆ·æ˜¯å¦å®‰è£… MetaMask:

```jsx title="/src/components/ConnectButton.tsx"
// Check function if MetaMask is installed
const isMetaMaskInstalled = () => {
  const { ethereum } = window;
  return Boolean(ethereum && ethereum.isMetaMask);
};
```

2. åœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œæˆ‘ä»¬å°†å¸®åŠ©ä½ å®‰è£…ä¸€ä¸ªç®€å•çš„ `button`ï¼Œç”¨æˆ·å¯ä»¥ç‚¹å‡»æ¥è¿æ¥ä»–ä»¬çš„é’±åŒ…ã€‚ç‚¹å‡»ä¹‹åï¼Œ `connectButton` ç»„ä»¶ä¸­çš„ `handleOnClick` å‡½æ•°ä¼šå‘ MetaMask å‘é€è¯·æ±‚ï¼Œå¦‚æœè¯·æ±‚æˆåŠŸï¼Œå°†ä¼šæç¤ºç”¨æˆ·æ‰€å¯¹åº”çš„é’±åŒ…åœ°å€ï¼š

```jsx title="/src/components/ConnectButton.tsx"
const handleOnClick = async () => {
  if (isMetaMaskInstalled()) {
    // Request to connect to MetaMask
    try {
      const accounts = await window.ethereum.request({
        method: "eth_requestAccounts",
      });
      alert(`Connected with: ${accounts[0]}`);
    } catch (error) {
      console.error(error.message);
    }
  } else {
    alert("Please install MetaMask.");
  }
};
```

3. ä½œä¸ºæ”¶å°¾ï¼Œä½ éœ€è¦å°† `handleOnClick` å‡½æ•°èµ‹å€¼ç»™ `button` çš„ `onClick` äº‹ä»¶å¤„ç†å™¨ã€‚

```jsx title="/src/components/ConnectButton.tsx"
<button className="connectButton" onClick={handleOnClick}>
  Connect wallet
</button>
```

è¿™æ ·ï¼Œä½ çš„ `connectButton` Â  ç»„ä»¶å°±å·²ç»å®Œæˆäº†ï¼ç°åœ¨ç”¨æˆ·å°±å¯ä»¥ä½¿ç”¨ MetaMask è¿æ¥ä¸Šä½ çš„åº”ç”¨äº†ã€‚

## åˆ›å»ºä¸€ä¸ªå…³æ³¨æŒ‰é’®

åœ¨è¿æ¥äº†è‡ªå·±çš„é’±åŒ…ä¹‹åï¼Œä½ å°±å¯ä»¥å¸®åŠ©ç”¨æˆ·å…³æ³¨å½¼æ­¤äº†ã€‚

1. é¦–å…ˆï¼Œä½ éœ€è¦åœ¨ CyberConnect SDK å¼•ç”¨ `CyberConnect`, `Env`, ä»¥åŠ `Blockchain` åˆ°ä½ çš„åº”ç”¨ä¸­ï¼š

```jsx title="/src/components/FollowButton.tsx"
import CyberConnect, { Env, Blockchain } from "@cyberlab/cyberconnect";
```

2. åˆ›å»ºè¿æ¥ä¹‹å‰ï¼Œä½ éœ€è¦å…ˆé¢„åˆ¶ä¸€ä¸ª `CyberConnect` å¯¹è±¡ï¼Œå¹¶åˆå§‹åŒ– `namespace`, `env`, `chain` ä»¥åŠ `provider` å˜é‡ï¼š

```jsx title="/src/components/FollowButton.tsx"
const cyberConnect = new CyberConnect({
  namespace: "CyberConnect",
  env: Env.PRODUCTION,
  chain: Blockchain.ETH,
  provider: window.ethereum,
});
```

3. åœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œæˆ‘ä»¬å°†ä¼šå¸®åŠ©ä½ å®Œæˆä¸€ä¸ªç®€å•çš„æŒ‰é’®ï¼Œç”¨æˆ·å¯ä»¥ç‚¹å‡»æ¥å…³æ³¨å¦ä¸€ä¸ªç”¨æˆ·ã€‚ç‚¹å‡»ä¹‹åï¼Œ `followButton` å‡½æ•°ä¼šå‘ MetaMask å‘é€è¯·æ±‚ï¼Œæé†’ç”¨æˆ·å¯¹åº”çš„é’±åŒ…åœ°å€ã€‚

```jsx title="/src/components/FollowButton.tsx"
const handleOnClick = async () => {
  // Prompt to enter the address
  const address = prompt("Enter the ens/address to follow:");

  try {
    await cyberConnect.connect(address);
    alert(`Success: you're following ${address}!`);
  } catch (error) {
    console.error(error.message);
  }
};
```

4. ä¸ºäº†å®Œæˆæˆ‘ä»¬çš„ä»£ç ï¼Œä½ éœ€è¦å°† `handleOnClick` å‡½æ•°èµ‹å€¼ç»™ `button` ä¸Šçš„`onClick` äº‹ä»¶å¤„ç†å™¨ã€‚

```jsx title="/src/components/FollowButton.tsx"
<button className="followButton" onClick={handleOnClick}>
  Follow address
</button>
```

ä½ çš„ `followButton` ç»„ä»¶å·²ç»å®Œæˆäº†ã€‚ç°åœ¨ä½ çš„ç”¨æˆ·å¯ä»¥åœ¨ä»¥å¤ªåŠç½‘ç»œä¸Šè¿æ¥å½¼æ­¤ã€‚æ‚¨ä¹Ÿå¯ä»¥åœ¨ [CyberConnect JS SDK](/cyberconnect-sdk/connect-with-js-sdk/) æ‰¾åˆ°å¾ˆå¤šé«˜çº§åŠŸèƒ½ã€‚

## æ²™ç›’

ä½ å¯ä»¥åœ¨æ•™ç¨‹ä¸­æ‰¾åˆ°å®Œæ•´ä»£ç ï¼Œå¹¶åœ¨ä¸‹æ–¹çš„æ²™ç›’ä¸­è¿›è¡Œè¯•éªŒï¼

<iframe
  src="https://codesandbox.io/embed/create-a-connection-fvecwy?codemirror=1&fontsize=14&hidenavigation=0&theme=dark&runonclick=1&view=split&module=/src/App.tsx,/src/components/ConnectButton.tsx,/src/components/FollowButton.tsx"
  title="create-a-connection"
  allow="accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking"
  sandbox="allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts"
></iframe>

æ­å–œ ğŸ‰ ä½ å·²ç»å¯ä»¥è¿›è¡Œä¸‹ä¸€æ­¥ï¼šéªŒè¯æ¨ç‰¹è´¦æˆ·ï¼
